var Mpc=this.Mpc=function(){function e(e){function n(){return Array.prototype.slice.call(arguments).concat([" (at ",k,":",O,")."]).join("")}function o(){throw Error(n.apply(this,arguments))}function i(){console.error(n.apply(this,arguments))}function p(){m?o.apply(this,arguments):(i.apply(this,arguments),L=d)}function E(t,r){g.push({partName:h,offset:x,length:t-x,content:e.slice(x,t)}),h=e.slice(C,X),x=r}var f,h,g=[],N=0,k=1,O=1,S=e.length,m=!0,L=T.START,x=-1,y=0,C=-1,X=-1;for(N=0;S>N;N++)if(f=e[N],f!==c){switch(L){case d:t(f)&&(L=b,y=N);break;case b:t(f)?L=T.OPEN:r(f)||(L=d);break;case T.START:e[N]===s||o('Expected "-" but found "',e[N],'"'),N++,O++,e[N]===s||o('Expected "-" but found "',e[N],'"'),N++,O++,e[N]===s||o('Expected "-" but found "',e[N],'"'),N++,O++,e[N]===u||o('Expected "-" but found "',e[N],'"'),L=T.TEXT,C=N+1;break;case T.OPEN:t(f)?L=T.OPEN:"--- "===e.substr(N,4)?(N+=3,O+=3,L=T.TEXT,C=N+1):L=d;break;case T.TEXT:f===u?(L=T.CLOSE,X=N):l[f]||p("Illegal character in part header title");break;case T.CLOSE:L=T.CLOSEEXT,e[N]===s||p('Expected "-" but found "',e[N],'"'),N++,O++,e[N]===s||p('Expected "-" but found "',e[N],'"'),N++,O++,e[N]===s||p('Expected "-" but found "',e[N],'"');break;case T.CLOSEEXT:f===a?L=T.NEWLINE:f!==s&&f!==u&&p("Illegal character in part header");break;case T.NEWLINE:f===a?(L=d,m?(m=!1,x=N+1,h=e.slice(C,X)):E(y,N+1)):r(f)||p("Missing empty line below part header");break;default:o("Internal parser error: unknown mode")}f===a?(k+=1,O=1):O+=1}return E(S),g}function t(e){return e===a}function r(e){return e===u||e===o}function n(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}var a="\n",c="\r",u=" ",o="	",s="-",i="0123456789",p="abcdefghijklmnopqrstuvwxyz",E="-_"+i+p+p.toUpperCase(),l=n(E),f=1,d=f++,b=f++,T={START:f++,OPEN:f++,TEXT:f++,CLOSE:f++,CLOSEEXT:f++,NEWLINE:f++};return{parseString:e}}();